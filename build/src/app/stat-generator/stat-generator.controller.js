angular.module("Dota2StatGenerator").controller("Dota2StatGeneratorController",["$scope","$window","$location","$timeout","$filter","$mdMedia","Dota2StatGeneratorService",function(t,e,o,a,n,i,r){var s,g,c,d,l;e.fbAsyncInit=function(){FB.init({appId:"1615955601781169",xfbml:!0,status:!0,version:"v2.11"}),FB.AppEvents.logPageView()},s=document,g="script",c="facebook-jssdk",l=s.getElementsByTagName(g)[0],s.getElementById(c)||((d=s.createElement(g)).id=c,d.src="https://connect.facebook.net/en_US/sdk.js",l.parentNode.insertBefore(d,l)),t.init=function(){t.showShareButton=!0,t.generatedStats="http://localhost:3000/generated-stats/placeholder.png";var e=o.search().id;e&&t.generateCanvas(e)},t.loginSteam=function(){e.location.href="/api/steam/login"},t.generateCanvas=function(e){t.isLoading=!0,r.getGeneratedStats(e).then(function(e){t.generatedStats=e.data,t.isLoading=!1},function(e){t.isLoading=!1,console.log(e)})},t.share=function(){t.generatedStats&&(console.log(t.generatedStats),FB.ui({method:"share_open_graph",action_type:"og.shares",display:"popup",action_properties:JSON.stringify({object:{"fb:app_id":"1615955601781169","og:url":"http://www.vertigoo.org/stat-generator/","og:title":"DotA 2 Stats Generator","og:description":"Generate, Share and Brag your all-time DotA 2 Statistics and show them who's the boss","og:image":t.generatedStats,"og:image:width":"600","og:image:height":"315"}})}))},t.openAd=function(t){e.open(t)}}]);